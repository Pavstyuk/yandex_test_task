document.addEventListener("DOMContentLoaded",(()=>{let e=.5*window.innerWidth,t=.5*window.innerHeight;window.addEventListener("resize",(()=>{e=.5*window.innerWidth,t=.5*window.innerHeight,window.innerWidth<=768&&c()})),document.addEventListener("mousemove",(n=>{Object.assign(document.documentElement,{style:`--move_x: ${-.05*(n.clientX-e)}px; --move_y: ${.05*(n.clientY-t)}px;`})}));const n=document.getElementById("cards-group"),r=document.getElementById("card-template");fetch("./data/members.json").then((e=>e.json())).then((e=>{l(e)})).catch((e=>{n.textContent="Участники не турнира - приятный сюрприз для ценителей шахмат!"}));const l=e=>{e.forEach((e=>{let t=r.content.cloneNode(!0);t.querySelector(".card-photo").src=e.photo,t.querySelector(".card-photo").setAttribute("alt",e.name),t.querySelector(".card-name").textContent=e.name,t.querySelector(".card-desc").textContent=e.desc,t.querySelector(".card-button").href=e.link,n.append(t)})),o()},o=()=>{const e=document.querySelector(".slider-wrapper");let t=e.querySelector(".switch-prev"),n=e.querySelector(".switch-next"),r=e.querySelector(".current"),l=e.querySelector(".total"),o=e.querySelector(".slides-group"),c=e.querySelectorAll(".slide-item"),d=o.offsetWidth,s=c[0].offsetWidth,a=Math.round(d/s);window.addEventListener("resize",(()=>{d=o.offsetWidth,s=c[0].offsetWidth,a=Math.round(d/s)})),l.textContent=c.length,r.textContent=a,currentDelta=0,n.addEventListener("click",(e=>{e.preventDefault(),clearInterval(i),a++,r.textContent=a,currentDelta-=s,a<=c.length||(currentDelta=0,a=Math.round(d/s),r.textContent=a),o.style.transform=`translate3d(${currentDelta}px,0,0)`,u()})),t.addEventListener("click",(e=>{e.preventDefault(),clearInterval(i),a--,r.textContent=a,currentDelta+=s,a>1||(currentDelta=-s*(c.length-Math.round(d/s)),a=c.length,r.textContent=a),o.style.transform=`translate3d(${currentDelta}px,0,0)`,u()}));let i=setInterval((()=>{n.click()}),4e3);const u=()=>{i=setInterval((()=>{n.click()}),4e3)}},c=()=>{const e=document.querySelector(".steps-slider"),t=e.querySelector(".steps-system"),n=t.querySelectorAll(".step"),r=e.querySelector(".switch-prev"),l=e.querySelector(".switch-next"),o=e.querySelector(".switch-bullet").querySelectorAll("i");let c=0,d=n[0].offsetWidth,s=1;r.disabled=!0,l.addEventListener("click",(e=>{e.preventDefault(),s++,c=c-d-24,t.style.transform=`translate3d(${c}px,0,0)`,a(s)})),r.addEventListener("click",(e=>{e.preventDefault(),s--,c=c+d+24,t.style.transform=`translate3d(${c}px,0,0)`,a(s)}));const a=e=>{5===e?l.disabled=!0:1===e?r.disabled=!0:(l.disabled=!1,r.disabled=!1),o.forEach(((t,n)=>{n===e-1?t.classList.add("active"):t.classList.remove("active")}))}};window.innerWidth<=768&&c()}));